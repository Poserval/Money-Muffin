<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Money Muffin - –£—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#007AFF">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Money Muffin">
    <meta name="description" content="–ü—Ä–æ—Å—Ç–æ–µ –∏ —É–¥–æ–±–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ –ª–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤">
    <meta name="keywords" content="—Ñ–∏–Ω–∞–Ω—Å—ã, –¥–µ–Ω—å–≥–∏, –±—é–¥–∂–µ—Ç, –∫–æ—à–µ–ª—å–∫–∏, —É—á–µ—Ç">

    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Money Muffin">

    <!-- Icons -->
    <link rel="apple-touch-icon" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-192x192.png">
    <link rel="icon" type="image/png" href="./icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icons/icon-512x512.png">

    <!-- Windows Meta -->
    <meta name="msapplication-TileColor" content="#007AFF">
    <meta name="msapplication-TileImage" content="./icons/icon-144x144.png">

    <!-- Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Preload critical CSS -->
    <link rel="preload" href="./style.css" as="style">
    <link rel="stylesheet" href="./style.css">
    
    <!-- Capacitor Compatibility -->
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –≤ Capacitor
        if (window.Capacitor) {
            console.log('üí∞ –ó–∞–ø—É—â–µ–Ω–æ –≤ Capacitor - —Å–∫—Ä—ã–≤–∞–µ–º PWA —Ñ—É–Ω–∫—Ü–∏–∏');
            // –§–ª–∞–≥ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞
            window.isCapacitor = true;
        } else {
            console.log('üí∞ –ó–∞–ø—É—â–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –≤–∫–ª—é—á–∞–µ–º PWA');
            window.isCapacitor = false;
        }
    </script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator && !window.isCapacitor) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('üí∞ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration);
                    })
                    .catch(function(error) {
                        console.log('üí∞ –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                    });
            });
        }
    </script>
</head>
<body>
    <div class="container" role="application" aria-label="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ Money Muffin">
        <header class="header" role="banner">
            <div class="app-header">
                <h1 class="app-title">Money Muffin</h1>
            </div>
            
            <section class="total-balance-section" aria-labelledby="totalBalance">
                <div class="total-balance">
                    <div class="balance-label" id="balanceLabel">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                    <div class="balance-right">
                        <div class="balance-amount-container">
                            <div class="balance-amount" id="totalBalance" aria-live="polite" aria-atomic="true">0</div>
                            <div class="currency-selector" id="currencySelector" role="button" aria-haspopup="true" aria-expanded="false" aria-label="–í—ã–±–æ—Ä –≤–∞–ª—é—Ç—ã">
                                <div class="selected-currency" id="selectedCurrency">‚ÇΩ</div>
                            </div>
                        </div>
                        <div class="balance-change-container">
                            <div class="balance-change" id="balanceChange" aria-live="polite">0 ‚ÇΩ</div>
                            <button class="reset-change-btn" id="resetChangeBtn" aria-label="–°–±—Ä–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞" title="–°–±—Ä–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ">‚Ü∫</button>
                        </div>
                    </div>
                </div>
            </section>
        </header>

        <main class="main" role="main">
            <section class="wallets-section" aria-labelledby="walletsHeading">
                <header class="section-header">
                    <h2 id="walletsHeading">–ú–æ–∏ –∫–æ—à–µ–ª—å–∫–∏</h2>
                    <button class="add-btn" id="addWalletBtn" aria-label="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ—à–µ–ª–µ–∫">+ –î–æ–±–∞–≤–∏—Ç—å</button>
                </header>

                <div class="sort-options" role="toolbar" aria-label="–û–ø—Ü–∏–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è">
                    <div class="sort-left">
                        <span class="sort-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:</span>
                        <div class="sort-buttons" role="group" aria-label="–¢–∏–ø—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">
                            <button class="sort-btn" data-sort="name" aria-pressed="false">–ò–º—è</button>
                            <button class="sort-btn active" data-sort="amount" aria-pressed="true">–°—É–º–º–∞ ‚ñº</button>
                        </div>
                    </div>
                    <div class="sort-actions" role="group" aria-label="–î–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º">
                        <button class="action-btn" id="shareBtn" aria-label="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º">üì§</button>
                        <button class="action-btn" id="installBtn" aria-label="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" title="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ">üì±</button>
                        <button class="action-btn danger" id="clearAllBtn" aria-label="–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ" title="–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ">üìõ</button>
                    </div>
                </div>

                <div class="wallets-container" id="walletsContainer" role="list" aria-label="–°–ø–∏—Å–æ–∫ –∫–æ—à–µ–ª—å–∫–æ–≤">
                    <!-- –ö–æ—à–µ–ª—å–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    <div class="empty-state" id="emptyState">
                        <p>üí∞ –ö–æ—à–µ–ª—å–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                        <p>–ù–∞–∂–º–∏—Ç–µ "+ –î–æ–±–∞–≤–∏—Ç—å" —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫–æ—à–µ–ª–µ–∫</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ -->
    <div class="modal" id="addWalletModal" role="dialog" aria-labelledby="addWalletTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="addWalletTitle">–î–æ–±–∞–≤–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</h3>
            </header>
            <div class="modal-body">
                <form id="walletForm" aria-labelledby="addWalletTitle">
                    <div class="form-group">
                        <label for="walletName">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                        <input type="text" id="walletName" required aria-required="true" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="walletAmount">–°—É–º–º–∞:</label>
                        <input type="number" id="walletAmount" step="any" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" required aria-required="true" inputmode="decimal">
                    </div>
                    <div class="form-group">
                        <label for="walletCurrency">–í–∞–ª—é—Ç–∞:</label>
                        <select id="walletCurrency" required aria-required="true">
                            <option value="RUB">–†—É–±–ª—å (‚ÇΩ)</option>
                            <option value="USD">–î–æ–ª–ª–∞—Ä ($)</option>
                            <option value="EUR">–ï–≤—Ä–æ (‚Ç¨)</option>
                            <option value="CNY">–Æ–∞–Ω—å (¬•)</option>
                            <option value="JPY">–ô–µ–Ω–∞ (¬•)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="walletType">–¢–∏–ø:</label>
                        <select id="walletType" required aria-required="true">
                            <option value="deposit">–í–∫–ª–∞–¥</option>
                            <option value="credit">–ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞</option>
                            <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
                            <option value="account">–°—á–µ—Ç</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label id="colorLabel">–¶–≤–µ—Ç –∫–æ—à–µ–ª—å–∫–∞:</label>
                        <div class="color-options" id="colorOptions" role="radiogroup" aria-labelledby="colorLabel">
                            <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-btn" id="cancelBtn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div class="modal" id="confirmModal" role="alertdialog" aria-labelledby="confirmTitle" aria-describedby="confirmDescription" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="confirmTitle">‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</h3>
            </header>
            <div class="modal-body">
                <p id="confirmDescription">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ?</p>
                <p class="warning-text" aria-live="assertive">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ –∫–æ—à–µ–ª—å–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ!</p>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" id="confirmCancelBtn" autofocus>–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="save-btn danger" id="confirmDeleteBtn">–£–¥–∞–ª–∏—Ç—å –≤—Å—ë</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ -->
    <div class="modal" id="installHelpModal" role="dialog" aria-labelledby="installHelpTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="installHelpTitle">üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
            </header>
            <div class="modal-body">
                <div class="install-options">
                    <!-- Android -->
                    <div class="install-option">
                        <h4>ü§ñ –î–ª—è Android</h4>
                        <p><strong>–°–ø–æ—Å–æ–± 1 (APK):</strong></p>
                        <ol>
                            <li>–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª MoneyMuffin.apk</li>
                            <li>–†–∞–∑—Ä–µ—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</li>
                            <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>
                        </ol>
                        <p><strong>–°–ø–æ—Å–æ–± 2 (PWA):</strong></p>
                        <ol>
                            <li>–í Chrome –Ω–∞–∂–º–∏—Ç–µ "‚ãÆ" (–º–µ–Ω—é)</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"</li>
                            <li>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É</li>
                        </ol>
                    </div>

                    <!-- iOS -->
                    <div class="install-option">
                        <h4>üçé –î–ª—è iPhone</h4>
                        <ol>
                            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Safari</li>
                            <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" üì§</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"</li>
                            <li>–ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É</li>
                        </ol>
                        <p class="note">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!</p>
                    </div>

                    <!-- –ö–æ–º–ø—å—é—Ç–µ—Ä—ã -->
                    <div class="install-option">
                        <h4>üíª –î–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤</h4>
                        <p><strong>Chrome/Edge:</strong></p>
                        <ol>
                            <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ</li>
                            <li>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É</li>
                        </ol>
                        <p class="note">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –º–µ–Ω—é "–ü—É—Å–∫" –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ</p>
                    </div>
                </div>
                
                <div class="qr-section">
                    <h4>üì≤ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ QR-–∫–æ–¥—É</h4>
                    <p>–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ:</p>
                    <div class="qr-placeholder">
                        <div style="text-align: center; padding: 20px; background: #f5f5f5; border-radius: 10px;">
                            <p>üîÑ QR-–∫–æ–¥ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ</p>
                            <p><small>–°—Å—ã–ª–∫–∞: <strong>https://poserval.github.io/money-muffin/</strong></small></p>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="cancel-btn" id="installHelpCloseBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preload JavaScript -->
    <link rel="preload" href="./script.js" as="script">
    <script src="./script.js" defer></script>
</body>
</html>
